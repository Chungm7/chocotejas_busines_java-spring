<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<body>

<div th:fragment="sidebar(activeUri)">
    <!-- Overlay para móviles -->
    <div id="sidebar-overlay" class="sidebar-overlay"></div>

    <!-- Sidebar -->
    <nav id="sidebar" class="sidebar d-flex flex-column flex-shrink-0 p-3"
         style="background-color: var(--color-milk-chocolate); color: var(--color-cream);">
        <div class="d-flex align-items-center justify-content-between mb-3">
            <a th:href="@{/}" class="fs-4 text-decoration-none fw-bold"
               style="color: var(--color-cream); font-family: var(--font-headings);">
                Inventario App
            </a>
            <button id="close-sidebar" class="btn p-0 d-md-none"
                    style="color: var(--color-cream); background: none; border: none;">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                     class="bi bi-x-lg" viewBox="0 0 16 16">
                    <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z"/>
                </svg>
            </button>
        </div>
        <hr style="border-color: var(--color-caramel);">

        <!-- Menú dinámico -->
        <ul class="nav nav-pills flex-column mb-auto">
            <li th:each="opcion : ${session.menuOpciones}">
                <a th:href="@{${opcion.ruta}}"
                   class="nav-link rounded-lg"
                   th:classappend="${opcion.ruta == activeUri} ? 'active' : ''"
                   style="color: var(--color-cream); font-weight: 500; margin-bottom: 0.3rem;">
                    <span th:text="${opcion.nombre}"></span>
                </a>
            </li>
        </ul>
        <hr style="border-color: var(--color-caramel);">

        <!-- Logout -->
        <ul class="nav nav-pills flex-column">
            <li>
                <a th:href="@{/logout}" class="nav-link rounded-lg"
                   style="color: var(--color-cream); font-weight: 500;">
                    Cerrar Sesión
                </a>
            </li>
        </ul>
    </nav>
</div>

</body>
</html>
